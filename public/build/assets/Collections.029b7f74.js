import{R as e,r as i,e as y,I,u as F,d as P}from"./app.44955430.js";import{T as R}from"./TextInput.26e5187c.js";import{I as N}from"./InputError.c30d59a2.js";import{I as w}from"./InputLabel.63db4971.js";import{I as k}from"./Icon.ca8c0097.js";import{M as D}from"./index.fe4006f1.js";import{L as _}from"./Auth.ce83d642.js";import{c as z}from"./index.3812b6a5.js";import"./index.1d0124c4.js";import"./Helmet.57f1bf76.js";import"./Logo.66b384ea.js";const M=e.createContext(null),A=()=>{const{collectionsData:a,setCollectionsData:c,onRequestClose:l}=i.exports.useContext(M),[t,m]=i.exports.useState({}),[u,f]=i.exports.useState({title:"",description:""});function d(){f({title:"",description:""}),l()}function x(g){g.preventDefault();const s=new FormData;s.append("title",u.title),s.append("description",u.description),y.post(route("collection.post"),s).then(E=>{const L=[...a],b=[E.data.collection];c(b.concat(L)),d()}).catch(E=>console.log(E))}function o(g){const s=g.target.name,E=g.target.value;f({...u,[s]:E})}function n(){d(),l()}return e.createElement(e.Fragment,null,e.createElement("div",{className:"flex justify-between items-center w-full bg-orange text-white p-3"},e.createElement("div",{className:"flex items-center"},e.createElement("h2",{className:"text-lg font-semibold"},"Create a new collection")),e.createElement("button",{onClick:n,className:"mr-2"},e.createElement(k,{name:"close",className:"w-3 h-3 fill-white"}))),e.createElement("form",{onSubmit:x,className:"bg-white"},e.createElement("div",{className:"p-4"},e.createElement(w,{forInput:"title",value:"Title"}),e.createElement(R,{type:"text",name:"title",placeholder:"Enter title",value:u.title,className:"mt-1 block w-full",handleChange:o}),e.createElement(N,{message:t.title,className:"mt-2"}),e.createElement(w,{className:"mt-2",forInput:"description",value:"Description"}),e.createElement("textarea",{type:"text",name:"description",placeholder:"Describe your what's in your collection",value:u.description,className:"my-2 w-full border border-gray-300 rounded-lg text-sm",onChange:o}),e.createElement(N,{message:t.description,className:"mt-2"})),e.createElement("div",{className:"w-full bg-white p-2 text-center border-t flex justify-end"},e.createElement("button",{type:"button",onClick:n,className:"btn-white mr-2"},"Cancel"),e.createElement("button",{className:"btn-orange"},"Create"))))},G=({collection:a,index:c})=>{const{id:l,description:t,title:m,thumbnail:u}=a,{collectionsData:f,setCollectionsData:d,onRequestClose:x}=i.exports.useContext(M),[o,n]=i.exports.useState({title:m,description:t}),[g,s]=i.exports.useState(!1),[E,L]=i.exports.useState({}),[b,C]=i.exports.useState(!1);function S(){s(!1),n({title:m,description:t})}function T(){y.delete(route("me.collection.delete",l)).then(r=>{const p=[...f];p.splice(c,1),d(p)}).catch(r=>console.log(r))}function j(r){const p=r.target.name,h=r.target.value;n({...a,[p]:h})}function q(){n({title:m,description:t}),s(!0)}function O(){var r=new FormData;r.append("_method","put"),r.append("title",o.title),r.append("description",o.description),y.post(route("me.collection.update",l),r,{headers:{"Content-Type":"multipart/form-data"}}).then(p=>{const h=[...f];h[c].title=p.data.collection.title,h[c].description=p.data.collection.description,d(h),s(!1)}).catch(p=>console.log(p))}return e.createElement("div",{className:"bg-white border-b p-4 flex-1 flex items-center justify-between"},e.createElement("div",{className:"flex"},e.createElement("div",{className:"w-40"},e.createElement(I,{href:route("me.collection",l)},e.createElement("img",{src:u,className:"w-full object-cover"}))),e.createElement("div",{className:"px-4 flex-1"},e.createElement("p",{className:"text-xs"},"MY COLLECTION"),e.createElement("p",{className:"font-semibold"},m),e.createElement("p",{className:"text-sm"},t))),e.createElement("div",{className:"relative"},e.createElement("button",{onClick:()=>C(!0)},e.createElement(k,{name:"dots",className:"w-6"})),e.createElement("div",null,e.createElement("div",{onClick:()=>C(!1),className:`origin-top-right z-20 absolute right-0 mt-2 w-48 rounded-md shadow-lg py-1 bg-white ring-1 ring-black ring-opacity-5 focus:outline-none ${b==!0?"":"hidden"}`},e.createElement("div",{className:"w-full text-left"},e.createElement("button",{className:"w-full text-left px-4 py-2 text-sm text-black select-none hover:bg-orange hover:text-white",onClick:q},"Edit collection"),e.createElement("button",{className:"w-full text-left px-4 py-2 text-sm text-black select-none hover:bg-orange hover:text-white",onClick:()=>T()},"Delete collection"))),e.createElement("div",{onClick:()=>{C(!1)},className:`fixed inset-0 z-10 ${b==!0?"":"hidden"}`}))),e.createElement(D,{isOpen:g,onRequestClose:()=>{s(!1)},className:"modal-collections",overlayClassName:"modal-lesson-overlay",contentLabel:"Edit Collection"},e.createElement("div",{className:"flex justify-between items-center w-full bg-orange text-white p-3"},e.createElement("div",{className:"flex items-center"},e.createElement("h2",{className:"text-lg font-semibold"},"Edit collection")),e.createElement("button",{onClick:S,className:"mr-2"},e.createElement(k,{name:"close",className:"w-3 h-3 fill-white"}))),e.createElement("div",{className:"p-4 bg-white"},e.createElement(w,{forInput:"title",value:"Title"}),e.createElement(R,{type:"text",name:"title",placeholder:"Enter title",value:o.title,className:"mt-1 block w-full",handleChange:j}),e.createElement(N,{message:E.title,className:"mt-2"}),e.createElement(w,{className:"mt-2",forInput:"description",value:"Description"}),e.createElement("textarea",{type:"text",name:"description",placeholder:"Describe your what's in your collection",value:o.description,className:"my-2 w-full border border-gray-300 rounded-lg text-sm",onChange:j,rows:5}),e.createElement(N,{message:E.description,className:"mt-2"})),e.createElement("div",{className:"w-full bg-white p-2 text-center border-t flex justify-end"},e.createElement("button",{type:"button",onClick:S,className:"btn-white mr-2"},"Cancel"),e.createElement("button",{className:"btn-orange",onClick:O},"Update"))))};D.setAppElement("*");const v=({link:a,text:c,length:l})=>{const t=route().current(a),m=z("my-4 font-semibold p-2 px-4  rounded select-none cursor-pointer w-full",{"border-black border-l-4 bg-orange text-white":t,"hover:bg-orange hover:bg-opacity-10":!t});return e.createElement(I,{href:route(a)},e.createElement("div",{className:m},c," ",l?"("+l+")":null))},H=()=>{const{collections:a,save_count:c,active_courses:l}=F().props,[t,m]=i.exports.useState(a||[]),[u,f]=i.exports.useState(!1);function d(){f(!1)}function x(o){const n=o.target.value;P.Inertia.get(route(n))}return console.log(t),e.createElement(M.Provider,{value:{collectionsData:t,setCollectionsData:m,onRequestClose:d}},e.createElement("div",{className:"w-full h-full flex items-stretch"},e.createElement("div",{className:"relative p-4 h-full bg-lightGray hidden w-1/4 lg:block"},e.createElement("h1",{className:"font-bold text-xl"},"My Library"),e.createElement(v,{text:"In Progress",link:"me",length:l}),e.createElement(v,{text:"Saved",link:"me.saved",length:c}),e.createElement(v,{text:"My Collections",link:"me.collections",length:t.length}),e.createElement(v,{text:"Learning History",link:"me.history"})),e.createElement("div",{className:"w-full flex-1 h-full bg-white p-6 overflow-auto flex flex-col relative "},e.createElement("div",{className:"lg:hidden"},e.createElement("h1",{className:"font-bold text-xl mb-2"},"Collections"),e.createElement("select",{onChange:x,className:"w-full border-gray-200 rounded-lg focus:border-orange focus:ring-orange focus:ring-2",value:"me.collections"},e.createElement("option",{value:"me"},"In progress (",l,")"),e.createElement("option",{value:"me.saved"},"Saved (",c,")"),e.createElement("option",{value:"me.collections"},"My Collections (",t.length,")"),e.createElement("option",{value:"me.history"},"Learning History"))),e.createElement("div",{className:"w-full text-right my-4"},e.createElement("button",{onClick:()=>f(!0),className:"btn-white"},"Create New Collection")),e.createElement("div",null,t.map((o,n)=>e.createElement(G,{key:n,collection:o,index:n}))),t.length===0&&e.createElement("div",{className:"flex flex-col flex-1 justify-center"},e.createElement("div",{className:"w-full text-center"},e.createElement("h2",{className:"font-semibold text-2xl"},"You don\u2019t have any collections."),e.createElement("img",{src:"/img/empty/collections.png",className:"w-48 my-8 mx-auto"}),e.createElement("p",{className:"my-2"},"When you create a collection you can find it here.")),e.createElement("div",{className:"w-full text-center"},e.createElement(I,{href:route("courses")},e.createElement("button",{className:"bg-black p-4 text-white font-semibold rounded-lg"},"Go to courses"))))),e.createElement(D,{isOpen:u,onRequestClose:d,className:"modal-collections",overlayClassName:"modal-lesson-overlay",contentLabel:"New Collection"},e.createElement(A,{onRequestClose:d}))))};H.layout=a=>e.createElement(_,{title:"Course",children:a});export{H as default};
