import{R as e,r,u as k,e as T,d as A}from"./app.d30997ab.js";import{L as D}from"./Auth.0f5064bf.js";import{M}from"./index.4bd095ca.js";import{u as O,p as S}from"./pickBy.fdb8e5ab.js";/* empty css            */import"./index.1a7c34d6.js";import"./Helmet.8f5178dc.js";import"./index.1d0124c4.js";import"./Logo.d18a814d.js";import"./Icon.f93ec26f.js";const C=e.createContext(null),I=()=>{const{values:a,handleChange:s,reset:c}=r.exports.useContext(C);return e.createElement("div",{className:"flex items-center w-full mr-4"},e.createElement("div",{className:"relative flex w-full bg-white rounded "},e.createElement("input",{className:"relative font-bold border-white w-full px-6 py-3 focus:outline-none focus:ring-2 focus:ring-orange",autoComplete:"off",type:"text",name:"search",value:a.search,onChange:s,placeholder:"Type name or email"})),e.createElement("button",{onClick:c,className:"p-2 font-bold text-sm text-white bg-black focus:outline-none",type:"button"},"Reset search"))},J=a=>{const s=new Date(a),c=("0"+s.getDate()).slice(-2),E=s.getMonth(),d=s.getFullYear(),n=["Jun","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];return e.createElement("span",null,n[E]," ",c,", ",d)},b=({user:a})=>{const{id:s,created_at:c,email:E,name:d,roles:n}=a,{csrf:x}=k().props,{reset:h,prevTeam:i,setTeam:g,closeModal:v}=r.exports.useContext(C),[N,o]=r.exports.useState(n||["student"]);function p(m,w){const u=m.target.value;T.put(route("user.role.update",w),{_token:x,roles:[u]}).then(f=>{o([u]);const t=[...i];if(console.log(t.filter(l=>l.id===a.id)),t.filter(l=>l.id===a.id).length>0){const l=t.map(y=>y.id).indexOf(a.id);t[l]={...a,roles:[u]},g(t),v(),h()}else g(t.concat({...a,roles:[u]}))}).catch(f=>console.log(f))}return e.createElement("tr",{className:"border-t"},e.createElement("td",{className:"px-4 py-2"},e.createElement("p",{className:"font-semibold"},d),e.createElement("p",{className:"text-xs"},E)),e.createElement("td",{className:"px-4 py-2 text-sm"},J(c)),e.createElement("td",{className:"text-right py-2 px-4"},e.createElement("select",{value:N[0],onChange:m=>p(m,s),className:"border border-gray-300 rounded"},e.createElement("option",{value:"student"},"Student"),e.createElement("option",{value:"instructor"},"Instructor"),e.createElement("option",{value:"editor"},"Editor"),e.createElement("option",{value:"admin"},"Administrator"))))};M.setAppElement("*");const L=()=>{const{users:a,csrf:s,admins:c,instructors:E,team:d,filters:n}=k().props,[x,h]=r.exports.useState(!1),[i,g]=r.exports.useState(d),[v,N]=r.exports.useState(!1),[o,p]=r.exports.useState({role:n.role||"",search:n.search||"",trashed:n.trashed||""}),m=O(o);function w(){p({role:"",search:"",trashed:""})}r.exports.useEffect(()=>{if(m){const t=Object.keys(S(o)).length?S(o):{remember:"forget"};A.Inertia.get(route(route().current()),t,{replace:!0,preserveState:!0})}},[o]);function u(t){const l=t.target.name,y=t.target.value;p(R=>({...R,[l]:y})),x&&h(!1)}function f(){N(!1)}return e.createElement(C.Provider,{value:{prevTeam:i,setTeam:g,opened:x,setOpened:h,values:o,setValues:p,handleChange:u,prevValues:m,reset:w,closeModal:f}},e.createElement("div",{className:"w-full h-full p-2 md:p-8 overflow-y-auto"},e.createElement("div",{className:"mx-auto mb-4 w-full max-w-7xl rounded-lg"},e.createElement("div",{className:"flex flex-wrap justify-between items-center w-full"},e.createElement("div",{className:"px-4 py-2 w-full md:w-auto"},e.createElement("h2",{className:"font-semibold text-xl"},"Team members"),e.createElement("p",null,"Manage your team members and their account permissions here.")),e.createElement("div",{className:"px-4 py-2 w-full md:w-auto"},e.createElement("button",{onClick:()=>N(!0),className:"btn-orange"},"Search member")))),e.createElement("div",null),e.createElement("div",{className:"p-8 flex flex-wrap max-w-7xl mx-auto"},e.createElement("div",{className:"w-full lg:w-1/3 pr-4"},e.createElement("h2",{className:"font-semibold"},"Admin users"),e.createElement("p",null,"Admins can add and remove users and manage organization-level settings.")),e.createElement("div",{className:"w-full lg:w-2/3 "},e.createElement("table",{className:"w-full bg-gray-50 rounded-lg overflow-hidden"},e.createElement("thead",{className:"bg-gray-700 rounded-t-lg text-white"},e.createElement("tr",null,e.createElement("th",{className:"text-left p-4"},"Name"),e.createElement("th",{className:"text-left p-4"},"Date added"),e.createElement("th",{className:"p-4"},"Role"))),e.createElement("tbody",null,i.map((t,l)=>t.roles[0]==="admin"?e.createElement(b,{key:l,user:t}):null))))),e.createElement("div",{className:"p-8 flex flex-wrap max-w-7xl mx-auto"},e.createElement("div",{className:"w-full lg:w-1/3 pr-4"},e.createElement("h2",{className:"font-semibold"},"Instructors users"),e.createElement("p",null,"Instructors can add and manage course contents.")),e.createElement("div",{className:"w-full lg:w-2/3"},e.createElement("table",{className:"w-full bg-gray-50 rounded-lg overflow-hidden"},e.createElement("thead",{className:"bg-gray-700 rounded-t-lg text-white"},e.createElement("tr",null,e.createElement("th",{className:"text-left p-4"},"Name"),e.createElement("th",{className:"text-left p-4"},"Date added"),e.createElement("th",{className:"p-4"},"Role"))),e.createElement("tbody",null,i.map((t,l)=>t.roles[0]==="instructor"?e.createElement(b,{key:l,user:t}):null))))),e.createElement(M,{isOpen:v,onRequestClose:f,className:"modal-search",overlayClassName:"modal-lesson-overlay",contentLabel:"New category"},e.createElement("div",{className:"w-full"},e.createElement(I,null)),e.createElement("div",{className:"w-full"},a!==null&&e.createElement("table",{className:"w-full bg-white"},e.createElement("thead",null,e.createElement("tr",null,e.createElement("th",{className:"text-left p-2 py-4"},"Name"),e.createElement("th",{className:"text-left p-2 py-4"},"Since"),e.createElement("th",null,e.createElement("span",{className:"sr-only p-2 py-4"},"Action")))),e.createElement("tbody",null,a.data.map((t,l)=>e.createElement(b,{key:l,user:t})),a.data.length===0&&e.createElement("tr",null,e.createElement("td",{className:"px-6 py-4 border-t border-gray-100",colSpan:"3"},"No users found"))))))))};L.layout=a=>e.createElement(D,{title:"Team",children:a});export{L as default};
