import{r as o,u as Y,a as Z,R as e,e as ee}from"./app.b96ee58b.js";import{I as g}from"./Icon.9ed4a856.js";import{I as b}from"./InputLabel.6e3a2024.js";import{I as te}from"./InputError.2adf2e68.js";import{L as ae}from"./Auth.9c9fd660.js";import{M as Q}from"./index.078cab15.js";import{T as N}from"./TextArea.3e44bbb9.js";import{u as le,S as se}from"./useStateManager-7e1e8489.esm.b13c629d.js";import{a as ne}from"./extends.cc011e2f.js";import"./index.1a7c34d6.js";import"./Helmet.3cdb19ce.js";import"./index.1d0124c4.js";import"./Logo.33a2fec1.js";import"./use-isomorphic-layout-effect.browser.esm.a22cb103.js";import"./inherits.1a00cd6c.js";var oe=o.exports.forwardRef(function(i,h){var v=le(i);return o.exports.createElement(se,ne({ref:h},v))});const M=oe;Q.setAppElement("#app");const re=()=>{const{courses:i}=Y().props,[h,v]=o.exports.useState(null),[q,A]=o.exports.useState(null),[y,D]=o.exports.useState(null),{data:m,setData:d,errors:C,clearErrors:T,setError:ce,post:O,put:me}=Z({source:"create",course:null,chapter:null,text:"",newQuiz:[]}),[L,E]=o.exports.useState(null),[f,w]=o.exports.useState(null),[$,x]=o.exports.useState(!1),[s,r]=o.exports.useState({text:"",section:"",options:[{value:0,text:"",message:""}]}),[k,S]=o.exports.useState([]),[j,p]=o.exports.useState(!1);function R(){const t=[...s.options];r({...s,options:t.concat({value:0,text:"",message:""})})}function P(){const t=[...m.newQuiz],a=s.options;var l=!1,n=[];a.map((c,u)=>{c.text==""&&n.push(`Add text to option #${u+1}.`),c.message==""&&n.push(`Add message to option #${u+1}.`),c.value==1&&(l=!0)}),s.text==""&&n.push("Question cannot be empty"),s.options.length<=1&&n.push("Questions must have at least two options."),l==!1&&n.push("Check the answer option."),n.length==0&&(d("newQuiz",t.concat(s)),r({text:"",section:"",options:[{value:0,text:"",message:""}]}),p(!1)),S(n)}function F(){r({text:"",section:"",options:[{value:0,text:"",message:""}]}),S([]),p(!1)}function z(t,a){const l=t.target.name,n=t.target.value,c=[...s.options],u=s;c[a][l]=n,r({...u,options:c})}function U(t,a){t.target.value;const l=[...s.options];l.map((c,u)=>l[u].value=0);const n=s;l[a].value=1,r({...n,options:l})}function _(){x(!1)}function I(){r({text:"",section:"",options:[{value:0,text:"",message:""}]}),E(null),w(null),p(!1),T()}function B(t){const a=[...s.options];a.splice(t,1),r({...s,options:a})}function G(){const t=[...m.newQuiz];t.splice(L,1),d("newQuiz",t),E(null),x(!1)}function H(t){E(t),x(!0)}function J(t,a){w(a),r(t),p(!0)}function K(t){A(t),d("chapter",t.value)}function V(t){D(t),d("course",t.value),ee.get(route("course.chapters",t.value)).then(a=>{v(a.data)}).catch(a=>console.log(a))}function W(){O(route("quiz.store"))}function X(){const t=[...m.newQuiz];console.log(t),console.log(f),t[Number(f)]=s,d("newQuiz",t),r({text:"",section:"",options:[{value:0,text:"",message:""}]}),w(null)}return e.createElement(e.Fragment,null,e.createElement("div",{className:"w-full h-full p-2 md:p-8 overflow-y-auto"},e.createElement("div",{className:"mx-auto mb-4 w-full max-w-7xl rounded-lg"},e.createElement("div",{className:"flex flex-wrap justify-between items-center w-full"},e.createElement("div",{className:"px-4 py-2 w-full md:w-auto"},e.createElement("h2",{className:"text-xl"},"Add New Quiz")))),e.createElement("div",{className:"mx-auto mb-4 w-full max-w-2xl rounded-lg"},e.createElement("div",{className:"w-full flex flex-wrap"},e.createElement("div",{className:"py-2 w-full md:w-1/2 md:pr-2"},e.createElement(b,{value:"Select Course"}),e.createElement(M,{placeholder:"Course Title",value:y,options:i,onChange:V}),e.createElement(te,{message:C.course})),y&&e.createElement("div",{className:"py-2 w-full md:w-1/2 md:pl-2"},e.createElement(b,{value:"Select Chapter"}),e.createElement(M,{placeholder:"Chapter Title",value:q,options:h,onChange:K}))),m.newQuiz.length===0&&e.createElement("div",{className:"text-center p-8"},e.createElement("h3",{className:`font-semibold text-sm mb-4 ${C.newQuiz?"text-red-600":""}`},"Quiz is empty, start creating a new question")),m.newQuiz.map((t,a)=>e.createElement("div",{key:a,className:"border p-2 rounded-lg mb-2"},e.createElement("div",{className:"flex justify-between"},e.createElement("h4",{className:"text-xs"},"Question ",a+1," of ",m.newQuiz.length),e.createElement("div",null,e.createElement("button",{className:"hover:bg-gray-100 mr-2 p-2 rounded-full",onClick:()=>J(t,a)},e.createElement(g,{name:"edit",className:"w-4 h-4"})),e.createElement("button",{className:"hover:bg-gray-100 hover:text-red-500 p-2 rounded-full",onClick:()=>H(a)},e.createElement(g,{name:"trash",className:"w-4 h-4 fill-current"})))),e.createElement("h3",{className:"font-semibold text-sm mb-2"},t.text),e.createElement("div",null,t.options.map((l,n)=>e.createElement("div",{key:n},e.createElement("div",{className:"flex items-start mb-2"},e.createElement("div",{className:`w-5 h-5  rounded-full mr-1 ${l.value==!0?"bg-white border-4 border-orange":"border bg-gray-100"}`}),e.createElement("div",{className:"flex-1"},e.createElement("p",{className:`text-sm ${l.value==!0?"text-black font-semibold":"text-gray-600"}`},l.text),e.createElement("p",{className:"text-xs text-gray-500"},l.message)))))))),e.createElement("div",{className:"w-full text-right"},e.createElement("button",{className:"btn-black",onClick:()=>p(!0)},"Create New Question")),e.createElement("div",{className:"text-center"},e.createElement("button",{onClick:W,className:"btn-orange"},"Save Quiz")))),e.createElement(Q,{isOpen:j,onRequestClose:I,className:"modal-lesson",overlayClassName:"modal-lesson-overlay",contentLabel:"Quiz Info"},e.createElement("div",{className:"w-full bg-orange text-white p-3 flex justify-between items-center"},e.createElement("h2",{className:"text-lg font-semibold"},f?"Edit":"Create New"," Question"),e.createElement("button",{onClick:I,className:"cursor-pointer mr-2"},e.createElement(g,{name:"close",className:"w-3 h-3 fill-white"}))),e.createElement("div",{className:"p-4 w-full"},e.createElement(b,{className:"mb-1 text-sm",forInput:"question",value:"New Question"}),e.createElement(N,{className:"w-full",placeholder:"Type your question here...",handleChange:t=>r({...s,text:t.target.value}),value:s.text}),e.createElement("p",{className:"text-xs text-gray-500 my-2 uppercase"},"OPTIONS"),e.createElement("div",{className:" rounded-lg"},s.options.map((t,a)=>e.createElement("div",{key:a,className:"flex items-start w-full mb-2"},e.createElement("div",null,e.createElement("input",{checked:t.value,type:"radio",name:"val",onChange:l=>U(l,a),className:"checked:bg-orange focus-checked: active:bg-orange hover:bg-orange focus:bg-orange focus-visible:bg-orange w-6 h-6 rounded-full border border-gray-200 mr-2 focus:ring-orange",tooltip:"Check correct option",flow:"right"}),e.createElement("div",{className:"mt-3 w-full pl-1"},e.createElement("button",{className:"hover:bg-gray-100 hover:text-orange text-gray-400  rounded-full",onClick:()=>B(a),tooltip:"Delete option",flow:"right"},e.createElement(g,{className:"w-4 h-4 fill-current",name:"trash"})))),e.createElement("div",{className:"flex-1"},e.createElement(N,{className:"w-full mb-2",handleChange:l=>z(l,a),name:"text",placeholder:"Text",value:t.text}),e.createElement(N,{className:"w-full",handleChange:l=>z(l,a),name:"message",placeholder:"Message",value:t.message})))),e.createElement("div",{className:"w-full text-right"},k.length>0&&e.createElement("p",{className:"text-red-600"},"Check the following errors"),e.createElement("ul",{className:"list-disc text-red-600"},k.map((t,a)=>e.createElement("li",{key:a,className:"text-red-600 text-sm"},t)))),e.createElement("div",{className:"flex justify-between my-2 text-left w-full"},e.createElement("button",{onClick:R,className:"border border-orange font-semibold p-2 text-orange rounded-lg text-xs hover:bg-orange hover:text-white"},"Add Option"),e.createElement("div",null,e.createElement("button",{className:"border border-orange font-semibold p-4 text-orange rounded-lg text-xs hover:bg-orange hover:text-white mr-2",onClick:F},"Cancel"),f==null?e.createElement("button",{className:"border border-orange bg-orange font-semibold p-4 rounded-lg text-white text-xs",onClick:P},"Add Question"):e.createElement("button",{className:"border border-orange bg-orange font-semibold p-4 rounded-lg text-white text-xs",onClick:X},"Update Question")))))),e.createElement(Q,{isOpen:$,onRequestClose:_,className:"modal-lesson",overlayClassName:"modal-lesson-overlay",contentLabel:"Delete Lesson"},e.createElement("div",{className:"w-full p-4"},e.createElement("div",{className:"text-gray-500"},e.createElement("p",{className:"text-lg font-semibold"},"Are you sure you want to delete this question?"),e.createElement("p",null,"This action is irreversible")),e.createElement("div",{className:"w-full flex justify-between"},e.createElement("button",{onClick:()=>x(!1),className:"btn-white mr-2"},"Cancel"),e.createElement("button",{type:"button",onClick:G,className:"btn-delete"},"Delete Question")))))};re.layout=i=>e.createElement(ae,{title:"Quiz edition",children:i});export{re as default};
