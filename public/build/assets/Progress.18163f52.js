import{r as o,R as e,e as N,I as y,d as C}from"./app.44955430.js";import{d as j}from"./durationFormat.767bfcc7.js";import{I as x}from"./Icon.ca8c0097.js";import{r as F}from"./releasedFormat.876b0481.js";import{T as D}from"./TextInput.26e5187c.js";import{I as k}from"./InputError.c30d59a2.js";import{I}from"./InputLabel.63db4971.js";import{M as S}from"./index.fe4006f1.js";const A=({collection:t,course:c})=>{const[r,u]=o.exports.useState(t.status||!1);function m(){u(!r);const a=new FormData;a.append("collection",t.id),a.append("course",c),N.post(route("course.collection"),a).then(s=>{u(s.data.status)}).catch(s=>console.error(s))}return e.createElement("div",{className:"bg-white border-b p-4 flex-1 flex items-center justify-between overflow-y-auto"},e.createElement("div",{className:"flex"},e.createElement("div",{className:"bg-gray-100 w-20"},e.createElement("img",{src:t.thumbnail,className:"w-full"})),e.createElement("div",{className:"px-2"},e.createElement("p",{className:"font-semibold"},t.title))),e.createElement("div",null,e.createElement("div",null,r==!0?e.createElement("button",{onClick:m,className:"text-orange"},"Remove"):e.createElement("button",{onClick:m,className:"text-black flex items-center"},e.createElement(x,{name:"plus",className:"mr-2 w-3 h-3"}),e.createElement("span",null,"Add")))))},R=({onRequestClose:t,course:c})=>{const[r,u]=o.exports.useState([]),[m,a]=o.exports.useState(!1),[s,h]=o.exports.useState({}),[n,E]=o.exports.useState({title:"",description:""});function g(){E({title:"",description:""})}function v(l){l.preventDefault();const i=new FormData;i.append("title",n.title),i.append("description",n.description),N.post(route("collection.post"),i).then(p=>{console.log(p.data.collection),w(),a(!1),g()}).catch(p=>console.log(p))}function d(l){const i=l.target.name,p=l.target.value;E({...n,[i]:p})}function f(){a(!1)}function b(){a(!1),g(),t()}function w(){N.get(route("user.collection")+"?course=1").then(l=>{console.log(l.data),u(l.data)}).catch(l=>console.log(l))}return o.exports.useEffect(()=>{console.log("useEffect"),w()},[]),e.createElement(e.Fragment,null,!m&&e.createElement("div",{className:"w-full h-full flex flex-col items-between justify-between"},e.createElement("div",{className:"w-full bg-orange text-white p-3 flex justify-between items-center"},e.createElement("h2",{className:"text-lg font-semibold"},"Add to collection"),e.createElement("button",{onClick:b,className:"cursor-pointer mr-2"},e.createElement(x,{name:"close",className:"w-3 h-3 fill-white"}))),r.map((l,i)=>e.createElement(A,{key:i,collection:l,course:c})),r.length===0&&e.createElement("div",{className:"w-full flex-1 h-full bg-white p-6 overflow-auto flex flex-col relative justify-center"},e.createElement("div",{className:"flex flex-col flex-1 justify-center"},e.createElement("div",{className:"w-full text-center"},e.createElement("h2",{className:"font-semibold text-xl"},"You haven't created a collection yet"),e.createElement("img",{src:"/img/empty/collections.png",className:"w-28 my-8 mx-auto"}),e.createElement("p",{className:"my-2 text-sm"},"Get started by clicking below.")))),e.createElement("div",{className:"w-full bg-white p-4 text-center border-t"},e.createElement("button",{className:"btn-white",onClick:()=>a(!0)},"Create Collection"))),m&&e.createElement(e.Fragment,null,e.createElement("div",{className:"flex justify-between items-center w-full bg-orange text-white p-3"},e.createElement("div",{className:"flex items-center"},e.createElement("button",{onClick:f,className:"cursor-pointer hover:bg-white hover:bg-opacity-20 w-8 h-8 p-1 rounded-full mr-2"},e.createElement(x,{name:"cheveron-left",className:"w-full fill-white "})),e.createElement("h2",{className:"text-lg font-semibold"},"Create a new collection")),e.createElement("button",{onClick:b,className:"mr-2"},e.createElement(x,{name:"close",className:"w-3 h-3 fill-white"}))),e.createElement("form",{onSubmit:v,className:"bg-white"},e.createElement("div",{className:"p-4"},e.createElement(I,{forInput:"title",value:"Title"}),e.createElement(D,{type:"text",name:"title",placeholder:"Enter title",value:n.title,className:"mt-1 block w-full",handleChange:d}),e.createElement(k,{message:s.title,className:"mt-2"}),e.createElement(I,{className:"mt-2",forInput:"description",value:"Description"}),e.createElement("textarea",{type:"text",name:"description",placeholder:"Describe your what's in your collection",value:n.description,className:"my-2 w-full border border-gray-300 rounded-lg text-sm",onChange:d}),e.createElement(k,{message:s.description,className:"mt-2"})),e.createElement("div",{className:"w-full bg-white p-2 text-center border-t flex justify-end"},e.createElement("button",{type:"button",onClick:f,className:"btn-white mr-2"},"Cancel"),e.createElement("button",{className:"btn-orange"},"Create")))))};S.setAppElement("*");const O=({course:t})=>{const{id:c,title:r,thumbnail:u,released:m,saved:a,slug:s}=t,[h,n]=o.exports.useState(!1),E=t.time-t.played,g=(t.played/t.time*100).toFixed(2),[v,d]=o.exports.useState(!1);function f(){d(!1)}function b(){C.Inertia.post(route("course.save"),{course_id:c})}function w(){C.Inertia.post(route("me",{course:c}))}return e.createElement("div",{className:"flex p-4 border rounded-lg w-full my-4"},e.createElement("div",null,e.createElement(y,{href:route("course.show",s)},e.createElement("img",{src:u,className:"rounded w-full max-w-xs"}))),e.createElement("div",{className:"p-4 flex-1 flex flex-col justify-between"},e.createElement("div",null,e.createElement(y,{href:route("course.show",s)},e.createElement("h4",{className:"font-semibold my-2"},r)),e.createElement("p",{className:"text-sm text-gray-500"},F(m))),e.createElement("div",{className:"flex items-center justify-between w-full"},e.createElement("div",{className:"w-full max-w-xs flex items-center"},e.createElement("div",{className:"flex-1 bg-gray-200 rounded-full h-1.5 "},e.createElement("div",{className:"bg-orange h-1.5 rounded-full",style:{width:`${g}%`}})),e.createElement("span",{className:"text-xs ml-3"},j(E)," left")),e.createElement("div",{className:"relative"},e.createElement("button",{onClick:()=>n(!0)},e.createElement(x,{name:"dots",className:"w-6"})),e.createElement("div",null,e.createElement("div",{onClick:()=>n(!1),className:`origin-top-right z-20 absolute right-0 mt-2 w-48 rounded-md shadow-lg py-1 bg-white ring-1 ring-black ring-opacity-5 focus:outline-none ${h==!0?"":"hidden"}`},e.createElement("div",{className:"w-full text-left"},e.createElement("button",{onClick:b,className:"w-full text-left px-4 py-2 text-sm text-black select-none hover:bg-orange hover:text-white"},a?"Unsaved":"Save"),e.createElement("button",{className:"w-full text-left px-4 py-2 text-sm text-black select-none hover:bg-orange hover:text-white",onClick:()=>d(!0)},"Add to Collection"),e.createElement("button",{className:"w-full text-left px-4 py-2 text-sm text-black select-none hover:bg-orange hover:text-white",onClick:w},"Remove"))),e.createElement("div",{onClick:()=>{n(!1)},className:`fixed inset-0 z-10 ${h==!0?"":"hidden"}`}))))),e.createElement(S,{isOpen:v,onRequestClose:f,className:"modal-collections",overlayClassName:"modal-lesson-overlay",contentLabel:"New category"},e.createElement(R,{onRequestClose:f,course:c})))};export{O as P};
