import{R as e,r as s,u as L,I as f,e as R,a as T,d as A}from"./app.b96ee58b.js";import{r as $}from"./releasedFormat.01d00946.js";import{I as d}from"./Icon.9ed4a856.js";import{d as P}from"./durationFormat.ab308053.js";import{L as q}from"./Auth.9c9fd660.js";import{I as M}from"./InputError.2adf2e68.js";import{I as S}from"./InputLabel.6e3a2024.js";import{c as z}from"./index.1a7c34d6.js";import"./Progress.1081e7c1.js";import{T as G}from"./TextInput.2efe2de3.js";import{M as D}from"./index.078cab15.js";import"./Helmet.3cdb19ce.js";import"./index.1d0124c4.js";import"./Logo.33a2fec1.js";const j=e.createContext(null),O=({course:l,index:t})=>{const{coursesData:o,setCoursesData:n}=s.exports.useContext(j),{collection:i}=L().props,{id:p,title:C,date:E,thumbnail:k,released:x,slug:h,time:v,played:r}=l,[b,c]=s.exports.useState(!1),u=v-r,g=(r/v*100).toFixed(2);function I(){const m=new FormData;m.append("course",l.id),m.append("collection",i.id),R.post(route("course.collection"),m).then(N=>{const a=[...o];a.splice(t,1),n(a)}).catch(N=>console.log(N))}return e.createElement("div",{className:"flex p-4 border rounded-lg w-full my-4"},e.createElement("div",null,e.createElement(f,{href:route("course.show",h)},e.createElement("img",{src:k,className:"rounded w-full max-w-xs"}))),e.createElement("div",{className:"p-4 flex-1 flex flex-col justify-between"},e.createElement("div",null,e.createElement(f,{href:route("course.show",h)},e.createElement("h4",{className:"font-semibold my-2"},C)),e.createElement("p",{className:"text-sm text-gray-500"},$(x))),e.createElement("div",{className:"flex items-center justify-between w-full"},e.createElement("div",{className:"w-full max-w-xs flex items-center"},e.createElement("div",{className:"flex-1 bg-gray-200 rounded-full h-1.5 "},e.createElement("div",{className:"bg-orange h-1.5 rounded-full",style:{width:`${g}%`}})),e.createElement("span",{className:"text-xs ml-3"},P(u)," left")),e.createElement("div",{className:"relative"},e.createElement("button",{onClick:()=>c(!0)},e.createElement(d,{name:"dots",className:"w-6"})),e.createElement("div",null,e.createElement("div",{onClick:()=>c(!1),className:`origin-top-right z-20 absolute right-0 mt-2 w-48 rounded-md shadow-lg py-1 bg-white ring-1 ring-black ring-opacity-5 focus:outline-none ${b==!0?"":"hidden"}`},e.createElement("div",{className:"w-full text-left"},e.createElement("button",{className:"w-full text-left px-4 py-2 text-sm text-black select-none hover:bg-orange hover:text-white",onClick:I},"Remove"))),e.createElement("div",{onClick:()=>{c(!1)},className:`fixed inset-0 z-10 ${b==!0?"":"hidden"}`}))))))};D.setAppElement("*");const y=({link:l,text:t,length:o})=>{const n=route().current(l),i=z("my-4 font-semibold p-2 px-4  rounded select-none cursor-pointer w-full",{"border-black border-l-4 bg-orange text-white":n,"hover:bg-orange hover:bg-opacity-10":!n});return e.createElement(f,{href:route(l)},e.createElement("div",{className:i},t," ",o?"("+o+")":null))},_=()=>{const{active_courses:l,collection:t,collections:o,courses:n,save_count:i}=L().props;s.exports.useState(t||[]);const[p,C]=s.exports.useState(n||[]),{data:E,setData:k,errors:x,put:h}=T({title:t.title||"",description:t.description||""});s.exports.useState(!1);const[v,r]=s.exports.useState(!1),[b,c]=s.exports.useState(!1);function u(){r(!1)}function g(){c(!1)}function I(){A.Inertia.delete(route("me.collection.delete",t.id))}function m(a){const w=a.target.name,F=a.target.value;k({...E,[w]:F})}function N(a){a.preventDefault(),h(route("me.collection.update",t.id),{onSuccess:()=>{r(!1)}})}return e.createElement(j.Provider,{value:{coursesData:p,setCoursesData:C}},e.createElement("div",{className:"w-full h-full flex items-stretch"},e.createElement("div",{className:"relative p-4 h-full bg-lightGray hidden w-1/4 lg:block"},e.createElement("h1",{className:"font-bold text-xl"},"My Library"),e.createElement(y,{text:"In Progress",link:"me",length:l}),e.createElement(y,{text:"Saved",link:"me.saved",length:i}),e.createElement(y,{text:"My Collections",link:"me.collections",length:o}),e.createElement(y,{text:"Learning History",link:"me.history"})),e.createElement("div",{className:"w-full flex-1 h-full bg-white p-6 overflow-auto flex flex-col relative "},e.createElement("div",{className:"flex justify-between"},e.createElement(f,{href:route("me.collections"),className:"group hover:text-orange flex items-center"},e.createElement("div",{className:"w-8 h-8 p-2 mr-2  group-hover:bg-gray-100 rounded-full"},e.createElement(d,{name:"cheveron-left",className:"fill-current"})),e.createElement("h4",null,"Back to collections")),e.createElement("div",{className:"flex"},e.createElement("button",{className:"p-3 mr-2 hover:bg-gray-100 rounded-full",onClick:()=>r(!0)},e.createElement(d,{name:"edit",className:"w-4 h-4"})),e.createElement("button",{className:"p-3 hover:bg-gray-100 rounded-full",onClick:()=>c(!0)},e.createElement(d,{name:"trash",className:"w-4 h-4"})))),e.createElement("div",{className:"w-full my-4"},e.createElement("h1",{className:"font-bold text-xl"},t.title),e.createElement("p",null,t.description)),e.createElement("div",null,p.map((a,w)=>e.createElement(O,{key:w,index:w,course:a}))),e.createElement("div",null,p.length===0&&e.createElement("div",{className:"my-8 text-center"},e.createElement("h2",{className:"font-semibold text-2xl"},"This collection does not have any course."),e.createElement("img",{src:"/img/empty/collections.png",className:"w-40 mx-auto"}),e.createElement("p",{className:"mb-4"},"Add content from your saved list or search."),e.createElement(f,{href:route("me.saved")},e.createElement("button",{className:"bg-black p-4 text-white font-semibold rounded-lg"},"Go to saved courses"))))),e.createElement(D,{isOpen:v,onRequestClose:u,className:"modal-collections",overlayClassName:"modal-lesson-overlay",contentLabel:"Edit Collection"},e.createElement("div",{className:"flex justify-between items-center w-full bg-orange text-white p-3"},e.createElement("div",{className:"flex items-center"},e.createElement("h2",{className:"text-lg font-semibold"},"Edit collection")),e.createElement("button",{onClick:u,className:"mr-2"},e.createElement(d,{name:"close",className:"w-3 h-3 fill-white"}))),e.createElement("form",{onSubmit:N,className:"p-4 bg-white"},e.createElement(S,{forInput:"title",value:"Title"}),e.createElement(G,{type:"text",name:"title",placeholder:"Enter title",value:E.title,className:"mt-1 block w-full",handleChange:m}),e.createElement(M,{message:x.title,className:"mt-2"}),e.createElement(S,{className:"mt-2",forInput:"description",value:"Description"}),e.createElement("textarea",{type:"text",name:"description",placeholder:"Describe your what's in your collection",value:E.description,className:"my-2 w-full border border-gray-300 rounded-lg text-sm",onChange:m,rows:5}),e.createElement(M,{message:x.description,className:"mt-2"}),e.createElement("div",{className:"text-right"},e.createElement("button",{className:"btn-white mr-2",type:"button",onClick:u},"Cancel"),e.createElement("button",{className:"btn-orange"},"Save")))),e.createElement(D,{isOpen:b,onRequestClose:g,className:"modal-collections",overlayClassName:"modal-lesson-overlay",contentLabel:"Edit Collection"},e.createElement("div",{className:"text-gray-500"},e.createElement("p",{className:"text-lg font-semibold"},"Are you sure you want to delete this collection?"),e.createElement("p",null,"This action is irreversible")),e.createElement("div",{className:"w-full flex justify-between"},e.createElement("button",{onClick:()=>g,className:"btn-white mr-2"},"Cancel"),e.createElement("button",{type:"button",onClick:I,className:"btn-delete"},"Delete Lesson")))))};_.layout=l=>e.createElement(q,{title:`${l.props.title} - Collection`,children:l});export{_ as default};
