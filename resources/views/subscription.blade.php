<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Firestarter Subscription</title>
    @vite('resources/css/app.css')

</head>

<body>
    <div class="w-full bg-white p-4 ">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <div class="p-2"><a href="/"><svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" x="0"
                        y="0" viewBox="0 0 498 97.5" xml:space="preserve" class="w-56">
                        <style>
                            .st0 {
                                fill: #f15a24
                            }
                        </style>
                        <circle cx="49.5" cy="12" r="10.5"></circle>
                        <path
                            d="M69.25 83.25c-28.37 0-53.3-14.64-67.71-36.77-.02.59-.04 1.17-.04 1.77C1.5 74.9 23.1 96.5 49.75 96.5c13.6 0 25.88-5.64 34.65-14.69-4.91.93-9.97 1.44-15.15 1.44z">
                        </path>
                        <path class="st0"
                            d="M70.74 16.5a78.364 78.364 0 0 1-26.65 29.2 78.723 78.723 0 0 1-10.01-12.03c.63.03 1.26.04 1.89.04 14.18 0 26.79-6.75 34.77-17.21z">
                        </path>
                        <path
                            d="M41.97 52.28c-1.97.15-3.96.22-5.97.22-7.12 0-14.02-.94-20.58-2.69A79.933 79.933 0 0 1 3.56 35.67c.63-11.99 5.53-22.84 13.22-31.06C19.4 23.41 28.6 40.1 41.97 52.28z"
                            style="fill: rgb(255, 151, 20);"></path>
                        <path
                            d="M99.47 26.87C86.21 41.25 67.72 50.73 47.01 52.28 65.22 41.49 78.8 23.71 84.09 2.64c7.21 6.38 12.62 14.74 15.38 24.23z">
                        </path>
                        <path class="st0"
                            d="M98.87 34.43C84.33 50.44 63.34 60.5 40 60.5c-6.57 0-12.96-.81-19.07-2.32C35.01 70.81 53.6 78.5 74 78.5c4.95 0 9.78-.47 14.48-1.34A58.187 58.187 0 0 0 99.5 43c0-2.91-.22-5.77-.63-8.57z">
                        </path>
                        <path
                            d="M141.59 36.53V50.5h20.68v3.96h-20.68v17.59h-5.13v-39.1h25.81v3.57h-20.68zm32.73 35.52v-39.1h-5.13v39.1h5.13zm32.18.45-10.81-16.13c-.92.1-7.48.18-7.48.18V72.5h-4.78V32.95h13.39c3.03 0 5.64.47 7.82 1.41 2.18.94 3.86 2.29 5.03 4.05 1.18 1.76 1.76 3.89 1.76 6.39 0 2.44-.59 4.53-1.76 6.29-1.18 1.76-3.85 4.11-6.03 5.05-.44.19-.92.35-1.39.5L213 72.5h-6.5zm-2.19-22.1c1.79-1.4 2.69-3.36 2.69-5.88 0-2.55-.9-4.53-2.69-5.93-1.8-1.4-4.42-2.1-7.88-2.1h-8.22v16h8.22c3.46.01 6.08-.69 7.88-2.09zM245 36.53v-3.57h-24.81v39.1H245v-3.58h-20.99V53.96H245v-3.52h-20.99V36.53H245zm30.59 7.46 4.62-5.91s-10.1-9.91-23.27-3.32c-9.97 4.99-7.39 18.65 4.8 20.87 5.62 1.02 9.76 2.15 10.8 4.34.94 1.97-.68 5.45-6.37 5.26-8.4-.28-12.1-5.08-12.1-5.08l-4.32 5.96s6.53 6.24 15.59 6.39c7.3.12 15.51-2.55 15.51-13.27 0-8.87-10.51-10.27-15.14-11.45-1.83-.47-4.63-.75-5.91-2.4-1.29-1.66-1.25-5.14 4.99-5.54 5.35-.35 10.8 4.15 10.8 4.15zm28.73 28.06V40.33H316v-7.37h-31v7.37h11.27v31.73h8.05zm108 0V40.33H424v-7.37h-31v7.37h11.27v31.73h8.05zm-69.48-6.37h-17.11l-2.48 6.38h-9.27l14.37-39.1h10.94l14.54 39.1h-8.49l-2.5-6.38zM340 58.5l-6.21-16.6L328 58.5h12zm40.1 13.55L373 58.5h-6.38v13.55h-8.34v-39.1h15.5c3.21 0 5.97.57 8.29 1.7 2.32 1.14 4.11 2.76 5.37 4.89 1.26 2.12 2.02 4.64 1.89 7.54-.33 7.42-6.01 9.32-8.33 10.42-.02.01 9 14.55 9 14.55h-9.9zm-6.78-31.72h-6.7V50.9h6.7c2.52 0 7.68.6 7.68-5.4 0-5-5.16-5.17-7.68-5.17zm64.71 24.46v-9.05h19.15v-7.09h-19.15v-8.43H458v-7.26h-27.96v39.1H458V64.8h-19.97zm47.96 7.71s-7.36-14.45-7.49-14.45h-6.16V72.5h-8.44V32.95h15.69c3.24 0 6.04.53 8.39 1.58 2.35 1.05 4.16 2.56 5.44 4.53 1.28 1.97 1.92 4.3 1.92 6.99 0 2.73-.64 5.07-1.92 7.02-1.28 1.95-3.09 3.44-5.44 4.45-.02.01-.04.01-.05.02L496 72.5h-10.01zm-6.43-32.17H473V51.5h6.56c2.47 0 4.34-.49 5.61-1.47 1.27-.98 1.9-2.36 1.9-4.14 0-1.78-.63-3.15-1.9-4.11-1.27-.97-3.14-1.45-5.61-1.45z">
                        </path>
                    </svg></a></div>
            <div>
                <a href="/dashboard"><button
                        class="p-2 px-4 text-orange rounded-full">Cancel</button>
                </a>
            </div>
        </div>
    </div>
    <div class="w-full bg-orange bg-opacity-10 py-10">
        <h1 class="text-3xl font-semibold text-center">Start your <span class="font-bold">1-month free trial</span>.</h1>
        <p class="text-xl font-semibold text-center mb-2"> Cancel anytime.</p>
        <div class="w-full max-w-2xl mx-auto">
            <div class="flex items-center mb-4">
                <div class="bg-orange w-8 h-8 rounded-full text-white flex items-center justify-center mr-2"><span
                        class="font-semibold">1</span></div>
                <div>
                    <h2 class="font-semibold">Confirm your billing cycle</h2>
                </div>
            </div>
            <div class="bg-white rounded-lg border">
                <div class="flex flex-wrap items-stretch">
                    <div class="text-center w-full p-4">
                        <div
                            class="border-2 border-orange rounded-lg p-2 h-full flex flex-col justify-center cursor-pointer bg-white">
                            <div class="text-center p-4">
                                <h2 class="font-bold text-lg my-2">Monthly</h2>
                                <p>1-month free trial then MX$49CAD/month*</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="bg-white rounded-lg ">
                    <div class="border-y p-4">
                        <div class="flex border-b p-2 justify-between">
                            <p>Monthly after free trial</p>
                            <p>CAD$49.00</p>
                        </div>
                        <div class="flex p-2 justify-between">
                            <p>Today's total</p>
                            <p>CAD$0.00</p>
                        </div>
                    </div>
                    <div class="p-4 text-sm">
                        <p>Your free trial begins on <span class="text-sm italic">{{ $today->format('F d, Y') }}</span> and will end on <span
                                class="text-sm italic">{{ $end->format('F d, Y') }}</span>. You can cancel anytime before <span
                                class="text-sm italic">{{ $end->format('F d, Y') }}</span> to avoid being charged and we'll send an email
                            reminder 7 days before the trial ends.</p>
                    </div>
                </div>
            </div>
        </div>
        <form id="payment-form" action="{{ route('subscription.create') }}" method="POST" class="w-full max-w-2xl mx-auto mt-4">
            <div class="flex items-center mb-4">
                <div class="bg-orange w-8 h-8 rounded-full text-white flex items-center justify-center mr-2"><span
                        class="font-semibold">2</span></div>
                <div>
                    <h2 class="font-semibold">Add your payment method</h2>
                </div>
                <div class="flex-1 text-right">Why do we need this for a free trial?</div>
            </div>
            <div class="bg-white rounded-lg p-4 mb-4">
                <div class="items-center px-4">
                    <div
                        class="rounded-lg p-2 h-full flex flex-col justify-center">
                        <div class="text-center p-4"><img src="/img/logos/cc.png" class="w-56 mx-auto"></div>
                    </div>

                </div>
                <div>
                        @csrf
                        <input type="hidden" name="plan" id="plan" value="{{ $plan->id }}">

                            <div class="row">
                                <div class="col-xl-4 col-lg-4">
                                    <div class="form-group">
                                        <label for="">Name</label>
                                        <input type="text" name="name" id="card-holder-name"
                                        class="border-gray-300 focus:border-orange  focus:ring-orange focus:ring-opacity-50 rounded-md shadow-sm mt-1 block w-full"
                                         value="" placeholder="Name on the card">
                                    </div>
                                </div>
                            </div>
                        <div class="grid grid-cols-1 gap-2">
                            <div class="row">
                                <div class="col-xl-4 col-lg-4">
                                    <div class="form-group">
                                        <label for="card-element" class="my-2 block font-semibold text-sm text-gray-800 undefined">Card details</label>
                                        <div id="card-element"></div>
                                    </div>
                                </div>
                                <div class="col-xl-12 col-lg-12">
                                    <hr>

                                </div>
                            </div>
                        </div>
                </div>
                <div class="p-4"></div>
            </div>
            <div class="w-full max-w-2xl mx-auto mt-4">
                <div class="flex items-center mb-4">
                    <div class="bg-orange w-8 h-8 rounded-full text-white flex items-center justify-center mr-2"><span
                            class="font-semibold">3</span></div>
                    <div>
                        <h2 class="font-semibold">Review your order</h2>
                    </div>
                </div>
                <div class="bg-white rounded-lg p-4 mb-4">
                    <ul class="list-disc pl-4 mb-4">
                        <li>Your free trial begins today and ends on <span class="text-sm italic">{{ $end->format('F d, Y') }}</span>
                        </li>
                        <li>Beginning <span class="text-sm italic">{{ $today->format('F d, Y') }}</span>, your payment method will be
                            charged CAN$49.00 each month (plus tax)</li>
                        <li>The plan will automaticallv renew each month until cancelled. To avoid charges for the next
                            month cancel, before the renewal date.</li>
                    </ul>
                    <div class="bg-gray-100 p-4 mb-4">
                        <p class="text-sm">By placing this order you agree to our terms of service. To ensure continued
                            service, we'll store and update (e.g., upon expiration) your payment method. Learn about how
                            to cancel and oyr refund policy. Prices may change.</p>
                    </div>
                    <div class="text-center">
                        <button type="submit" class="btn-orange" id="card-button"
                        data-secret="{{ $intent->client_secret }}">Start your free trial</button>

                    </div>
                    <div class="mt-4 flex w-full items-center justify-center"><svg class="w-4 h-4 fill-current mr-1"
                            xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                            <g>
                                <path
                                    d="M405.333,179.712v-30.379C405.333,66.859,338.475,0,256,0S106.667,66.859,106.667,149.333v30.379   c-38.826,16.945-63.944,55.259-64,97.621v128C42.737,464.214,90.452,511.93,149.333,512h213.333   c58.881-0.07,106.596-47.786,106.667-106.667v-128C469.278,234.971,444.159,196.657,405.333,179.712z M277.333,362.667   c0,11.782-9.551,21.333-21.333,21.333c-11.782,0-21.333-9.551-21.333-21.333V320c0-11.782,9.551-21.333,21.333-21.333   c11.782,0,21.333,9.551,21.333,21.333V362.667z M362.667,170.667H149.333v-21.333c0-58.91,47.756-106.667,106.667-106.667   s106.667,47.756,106.667,106.667V170.667z">
                                </path>
                            </g>
                        </svg>
                        <p class="text-gray-800 text-sm">Secure Checkout</p>
                    </div>
                </div>
            </div>
            <div class="bg-white rounded-lg ">
                <div class="border-b p-4">
                    <h2>Frequently asked questions</h2>
                </div>
                <div class="p-4 grid grid-cols-1 md:grid-cols-3">
                    <div class="p-2">
                        <h2 class="font-semibold text-sm">Will I be charged during my free trial?</h2>
                        <p class="text-xs">No, you won't be charged during vour free trial. which begins on Cantamber
                            17 2022 and ends on October 17 2022 You can cance anvtime before October 17 2022 tc avoid
                            beina charged</p>
                    </div>
                    <div class="p-2">
                        <h2 class="font-semibold text-sm">How can I cancel during my free trial?</h2>
                        <p class="text-xs">Once you're signed up, a link tc cancel will appear on your Settings page.
                            Learn more about how to cancel on our Helo Center</p>
                    </div>
                    <div class="p-2">
                        <h2 class="font-semibold text-sm">What happens after the free trial period?</h2>
                        <p class="text-xs">If vou do not cancel before your free trial neriod ends on Octobe 17 2022
                            vou will he automaticall charged for vour subscrintion</p>
                    </div>
                </div>
            </div>
        </div>
    </form>
    <script src="https://js.stripe.com/v3/"></script>
    <script>
        const stripe = Stripe('{{ env('STRIPE_KEY') }}')

        const elements = stripe.elements()
        const cardElement = elements.create('card', {
        style: {
            base: {
            iconColor: '#000',
            color: '#000',
            fontWeight: '600',
            fontFamily: 'Montserrat, sans-serif',
            fontSize: '16px',
            fontSmoothing: 'antialiased',
            ':-webkit-autofill': {
                color: '#fce883',
            },
            '::placeholder': {
                color: '#000',
            },
            },
            invalid: {
            iconColor: '#FF2B0D',
            color: '#FF2B0D',
            },
        },
        });
        cardElement.mount('#card-element')

        const form = document.getElementById('payment-form')
        const cardBtn = document.getElementById('card-button')
        const cardHolderName = document.getElementById('card-holder-name')

        form.addEventListener('submit', async (e) => {
            e.preventDefault()

            cardBtn.disabled = true
            const {
                setupIntent,
                error
            } = await stripe.confirmCardSetup(
                cardBtn.dataset.secret, {
                    payment_method: {
                        card: cardElement,
                        billing_details: {
                            name: cardHolderName.value
                        }
                    }
                }
            )

            if (error) {
                cardBtn.disable = false
            } else {
                let token = document.createElement('input')
                token.setAttribute('type', 'hidden')
                token.setAttribute('name', 'token')
                token.setAttribute('value', setupIntent.payment_method)
                form.appendChild(token)
                form.submit();
            }
        })
    </script>
</body>

</html>
